<%- include('../headers/header.ejs') %>

<main class="container d-flex flex-column py-4 overflow-hidden overflow-y-scroll main-container py-4">
    <% if (locals.admin) { %>
        <div class="d-flex"> 
            <h2 class="flex-grow-1 montserrat fw-bolder">BLOGS</h2>
        </div>
        
    <% } else { %>
    
        <div class="d-flex"> 
            <h2 class="flex-grow-1 montserrat fw-bolder">My Blogs</h2>
            <a href="/addPost" class="btn  fw-bolder p-1 btn-outline-dark border-2 d-flex align-items-center gap-1"> <i class="fa-solid fa-plus pt-1"></i> create your Blog</a>
        </div>

    <% } %>
<div class="d-flex flex-column py-4 gap-3"> 
    <% posts.forEach(element => { %>
        <div class="posts border p-3 ">
            <a href="/viewPost/<%= element._id%>" class="header-txt fs-2 text-decoration-none text-dark"><%= element.title %></a>
            <p><i class="fa-regular fa-user"></i>  <%= element.author.username %></p>
            <p class="fw-normal poppins post-content"><%= element.content %></p>
            <div class="d-flex justify-content-end gap-3">
                <a href="/update/<%= element._id %>" class="btn fw-bolder p-1 px-3 btn-outline-dark border-2">Edit</a>
                <a href="#" onclick="deletePost('<%= element._id %>', '<%= element.author._id %>'); return false;" class="btn fw-bolder p-1 btn-outline-dark border-2">Delete</a>
            </div>
        </div>

    <% }) %>

</div>
</main>

<%- include('../footers/footers.ejs') %>